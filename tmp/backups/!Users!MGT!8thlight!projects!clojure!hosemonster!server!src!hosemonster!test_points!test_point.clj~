(ns hosemonster.test-points.test-point
  (:use
    [hosemonster.util.model :only (def-hm-entity ->int)]
    [metis.validator.core :only [defvalidator]])
  (:import
    [com.google.appengine.api.datastore Key]))

(defvalidator validate-test-point
  [[:speed :discharge-pressure :suction-pressure :volts1 :volts2 :volts3 :amps1 :amps2 :amps3] :numericality {:allow-blank true :allow-nil true}]
  [:work-order-key :presence])

(def-hm-entity TestPoint
  [created-at]
  [updated-at]
  [work-order-key :type Key]
  [speed :packer ->int]
  [discharge-pressure :packer ->int]
  [suction-pressure :packer ->int]
  [volts1 :packer ->int]
  [volts2 :packer ->int]
  [volts3 :packer ->int]
  [amps1 :packer ->int]
  [amps2 :packer ->int]
  [amps3 :packer ->int])
