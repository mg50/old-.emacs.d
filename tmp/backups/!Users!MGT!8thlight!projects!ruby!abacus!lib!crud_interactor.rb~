module Lib
  class CrudInteractor
    def initialize(db_adapter)
      @db_adapter = db_adapter
    end

    def create(attributes, callback)
      instance = @db_adapter.create(attributes)
      instance.save!
      callback.call(instance)
    end

    def find(id, callback)
      instance = @db_adapter.find(id)
      callback.call(instance)
    end

    def find_all(callback)
      all = @db_adapter.find_all
      callback.call(all)
    end

    def update(id, attributes, callback)
      instance = @db_adapter.update(id, attributes)
      callback.call(instance)
    end
  end
end
