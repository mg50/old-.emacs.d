(ns server.thread-test
  (:use (clojure test) (server thread core
                               [response :only [make-response-string]])))


(deftest test-request-response-cycle-1
  (binding [dispatch (€ô¨¢œô§»fn [_] [200 "Successful!"])]
    (let [sock (MockSocket. "test")]
      (request-response-cycle sock)
      (is (= (-> sock .getOutputStream .toString)
             (make-response-string 200 "Successul!"))))))



